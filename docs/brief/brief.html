<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Class, Homeownership, and Support for Clean Energy Policy</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="brief_files/libs/clipboard/clipboard.min.js"></script>
<script src="brief_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="brief_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="brief_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="brief_files/libs/quarto-html/popper.min.js"></script>
<script src="brief_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="brief_files/libs/quarto-html/anchor.min.js"></script>
<link href="brief_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="brief_files/libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="brief_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="brief_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="brief_files/libs/bootstrap/bootstrap-d6a003b94517c951b2d65075d42fb01b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#motivation-and-question" id="toc-motivation-and-question" class="nav-link active" data-scroll-target="#motivation-and-question">Motivation and Question</a></li>
  <li><a href="#data-and-variables" id="toc-data-and-variables" class="nav-link" data-scroll-target="#data-and-variables">Data and Variables</a></li>
  <li><a href="#descriptive-patterns-income-homeownership-and-clean-energy-support" id="toc-descriptive-patterns-income-homeownership-and-clean-energy-support" class="nav-link" data-scroll-target="#descriptive-patterns-income-homeownership-and-clean-energy-support">Descriptive Patterns: Income, Homeownership, and Clean Energy Support</a></li>
  <li><a href="#weighted-ols-results-does-homeownership-matter-net-of-politics" id="toc-weighted-ols-results-does-homeownership-matter-net-of-politics" class="nav-link" data-scroll-target="#weighted-ols-results-does-homeownership-matter-net-of-politics">Weighted OLS Results: Does Homeownership Matter Net of Politics?</a></li>
  <li><a href="#predicted-values-visualizing-the-tenure-gap" id="toc-predicted-values-visualizing-the-tenure-gap" class="nav-link" data-scroll-target="#predicted-values-visualizing-the-tenure-gap">Predicted Values: Visualizing the Tenure Gap</a></li>
  <li><a href="#interpretation-and-implications" id="toc-interpretation-and-implications" class="nav-link" data-scroll-target="#interpretation-and-implications">Interpretation and Implications</a></li>
  <li><a href="#limitations-and-next-steps" id="toc-limitations-and-next-steps" class="nav-link" data-scroll-target="#limitations-and-next-steps">Limitations and Next Steps</a></li>
  <li><a href="#methods" id="toc-methods" class="nav-link" data-scroll-target="#methods">Methods</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Class, Homeownership, and Support for Clean Energy Policy</h1>
<p class="subtitle lead">Evidence from the 2024 Cooperative Election Study</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="motivation-and-question" class="level2">
<h2 class="anchored" data-anchor-id="motivation-and-question">Motivation and Question</h2>
<p>Public support for clean energy and environmental regulation is often described in ideological or partisan terms. While political orientation is clearly central, less attention has been paid to how material position—particularly housing tenure—may independently structure climate policy attitudes.</p>
<p>This brief asks a simple question:</p>
<p><strong>Does homeownership predict support for clean energy policy net of party, ideology, and income?</strong></p>
<p>Using nationally representative survey data from the 2024 Cooperative Election Study (CES), I show that homeownership is associated with lower support for clean energy policies even after accounting for political orientation and standard socioeconomic controls. This pattern suggests that climate attitudes may reflect not only ideology, but also individuals’ positions within housing and asset structures that shape exposure to regulation and perceived costs.</p>
</section>
<section id="data-and-variables" class="level2">
<h2 class="anchored" data-anchor-id="data-and-variables">Data and Variables</h2>
<p>The analysis uses the 2024 CES Common Content, weighted to approximate national representativeness. After listwise deletion on key variables, the analytic sample includes approximately 56,000 respondents.</p>
<p>The primary outcome is clean_energy_support, a composite index capturing support for environmental and clean energy policies. The index is constructed as the mean of multiple binary items, including support for:</p>
<ul>
<li><p>EPA regulation of carbon dioxide emissions</p></li>
<li><p>Renewable electricity generation requirements</p></li>
<li><p>Strengthened enforcement of the Clean Air and Clean Water Acts</p></li>
<li><p>Restrictions on fossil fuel expansion and new oil and gas leases</p></li>
</ul>
<p>The index ranges from 0 to 1, where higher values indicate stronger overall support for clean energy and environmental regulation. Using an index rather than a single item provides a more stable measure of underlying policy orientation.</p>
</section>
<section id="descriptive-patterns-income-homeownership-and-clean-energy-support" class="level2">
<h2 class="anchored" data-anchor-id="descriptive-patterns-income-homeownership-and-clean-energy-support">Descriptive Patterns: Income, Homeownership, and Clean Energy Support</h2>
<p>Figure 1 presents weighted mean levels of clean energy support by income group and homeownership status:</p>
<p><img src="../exports/figures/clean_energy_by_income_homeowner.png" class="img-fluid" alt="Clean energy support by income and homeownership"></p>
<p>Two patterns are clear:</p>
<ol type="1">
<li><p>Renters exhibit consistently higher support for clean energy policies than homeowners, across all income groups.</p></li>
<li><p>Income differences within tenure groups are relatively small, especially among renters.</p></li>
</ol>
<p>Among renters, support for clean energy policies is high (approximately 0.70 on a 0–1 scale) regardless of income. Among homeowners, support is substantially lower (roughly 0.57–0.59), again with little variation by income.</p>
<p>These patterns suggest that housing tenure may be more strongly associated with climate attitudes than income alone, motivating multivariate analysis.</p>
</section>
<section id="weighted-ols-results-does-homeownership-matter-net-of-politics" class="level2">
<h2 class="anchored" data-anchor-id="weighted-ols-results-does-homeownership-matter-net-of-politics">Weighted OLS Results: Does Homeownership Matter Net of Politics?</h2>
<p>To assess whether the observed tenure gap reflects political sorting, I estimate a weighted least squares (WLS) regression of clean energy support on:</p>
<ul>
<li><p>Party identification</p></li>
<li><p>Political ideology</p></li>
<li><p>Income group</p></li>
<li><p>Education level</p></li>
<li><p>Homeownership status</p></li>
<li><p>Age, gender, and race/ethnicity</p></li>
</ul>
<p>Figure 2 displays coefficient estimates with 95% confidence intervals:</p>
<p><img src="../exports/figures/ols_coefplot.png" class="img-fluid" alt="Coefficient plot from weighted OLS model"></p>
<p>As expected, party identification and ideology are the strongest predictors of clean energy support. Moving from liberal to conservative ideological categories is associated with large declines in support, and partisan differences are substantial.</p>
<p>However, even after accounting for these political variables, homeownership remains negatively associated with clean energy support. The estimated effect is modest in magnitude (approximately −0.03 on a 0–1 scale), but statistically significant and comparable to—or larger than—the effect of moving between income categories.</p>
<p>To facilitate interpretation, Table 1 presents a labeled regression table with human-readable predictor names:</p>
<style type="text/css">
#T_fad71 th {
  text-align: left;
}
</style>

<table id="T_fad71" class="caption-top table">
<thead>
<tr class="header">
<th id="T_fad71_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">Block</th>
<th id="T_fad71_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">Predictor</th>
<th id="T_fad71_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">Coef (HC1)</th>
<th id="T_fad71_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">95% CI</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_fad71_row0_col0" class="data row0 col0">Class: Income / Education / Tenure</td>
<td id="T_fad71_row0_col1" class="data row0 col1">Income: High</td>
<td id="T_fad71_row0_col2" class="data row0 col2">-0.030700</td>
<td id="T_fad71_row0_col3" class="data row0 col3">[-0.0441, -0.0174]</td>
</tr>
<tr class="even">
<td id="T_fad71_row1_col0" class="data row1 col0">Class: Income / Education / Tenure</td>
<td id="T_fad71_row1_col1" class="data row1 col1">Homeowner (vs renter)</td>
<td id="T_fad71_row1_col2" class="data row1 col2">-0.029300</td>
<td id="T_fad71_row1_col3" class="data row1 col3">[-0.0415, -0.0170]</td>
</tr>
<tr class="odd">
<td id="T_fad71_row2_col0" class="data row2 col0">Class: Income / Education / Tenure</td>
<td id="T_fad71_row2_col1" class="data row2 col1">Income: Middle</td>
<td id="T_fad71_row2_col2" class="data row2 col2">-0.008400</td>
<td id="T_fad71_row2_col3" class="data row2 col3">[-0.0211, 0.0043]</td>
</tr>
<tr class="even">
<td id="T_fad71_row3_col0" class="data row3 col0">Class: Income / Education / Tenure</td>
<td id="T_fad71_row3_col1" class="data row3 col1">Education: Some college</td>
<td id="T_fad71_row3_col2" class="data row3 col2">-0.005700</td>
<td id="T_fad71_row3_col3" class="data row3 col3">[-0.0162, 0.0047]</td>
</tr>
<tr class="odd">
<td id="T_fad71_row4_col0" class="data row4 col0">Class: Income / Education / Tenure</td>
<td id="T_fad71_row4_col1" class="data row4 col1">Education: College+</td>
<td id="T_fad71_row4_col2" class="data row4 col2">0.011100</td>
<td id="T_fad71_row4_col3" class="data row4 col3">[-0.0012, 0.0233]</td>
</tr>
<tr class="even">
<td id="T_fad71_row5_col0" class="data row5 col0">Demographics</td>
<td id="T_fad71_row5_col1" class="data row5 col1">Gender: Other</td>
<td id="T_fad71_row5_col2" class="data row5 col2">-0.132500</td>
<td id="T_fad71_row5_col3" class="data row5 col3">[-0.2397, -0.0253]</td>
</tr>
<tr class="odd">
<td id="T_fad71_row6_col0" class="data row6 col0">Demographics</td>
<td id="T_fad71_row6_col1" class="data row6 col1">Age: 65+</td>
<td id="T_fad71_row6_col2" class="data row6 col2">-0.062100</td>
<td id="T_fad71_row6_col3" class="data row6 col3">[-0.0796, -0.0447]</td>
</tr>
<tr class="even">
<td id="T_fad71_row7_col0" class="data row7 col0">Demographics</td>
<td id="T_fad71_row7_col1" class="data row7 col1">Age: 45–64</td>
<td id="T_fad71_row7_col2" class="data row7 col2">-0.059300</td>
<td id="T_fad71_row7_col3" class="data row7 col3">[-0.0762, -0.0423]</td>
</tr>
<tr class="odd">
<td id="T_fad71_row8_col0" class="data row8 col0">Demographics</td>
<td id="T_fad71_row8_col1" class="data row8 col1">Age: 30–44</td>
<td id="T_fad71_row8_col2" class="data row8 col2">-0.031400</td>
<td id="T_fad71_row8_col3" class="data row8 col3">[-0.0489, -0.0139]</td>
</tr>
<tr class="even">
<td id="T_fad71_row9_col0" class="data row9 col0">Demographics</td>
<td id="T_fad71_row9_col1" class="data row9 col1">Race: Black</td>
<td id="T_fad71_row9_col2" class="data row9 col2">0.014300</td>
<td id="T_fad71_row9_col3" class="data row9 col3">[-0.0024, 0.0311]</td>
</tr>
<tr class="odd">
<td id="T_fad71_row10_col0" class="data row10 col0">Demographics</td>
<td id="T_fad71_row10_col1" class="data row10 col1">Gender: Female</td>
<td id="T_fad71_row10_col2" class="data row10 col2">0.034800</td>
<td id="T_fad71_row10_col3" class="data row10 col3">[0.0255, 0.0442]</td>
</tr>
<tr class="even">
<td id="T_fad71_row11_col0" class="data row11 col0">Demographics</td>
<td id="T_fad71_row11_col1" class="data row11 col1">Race: Other</td>
<td id="T_fad71_row11_col2" class="data row11 col2">0.036000</td>
<td id="T_fad71_row11_col3" class="data row11 col3">[0.0183, 0.0537]</td>
</tr>
<tr class="odd">
<td id="T_fad71_row12_col0" class="data row12 col0">Demographics</td>
<td id="T_fad71_row12_col1" class="data row12 col1">Race: Hispanic</td>
<td id="T_fad71_row12_col2" class="data row12 col2">0.036100</td>
<td id="T_fad71_row12_col3" class="data row12 col3">[0.0197, 0.0525]</td>
</tr>
<tr class="even">
<td id="T_fad71_row13_col0" class="data row13 col0">Demographics</td>
<td id="T_fad71_row13_col1" class="data row13 col1">Gender: Nonbinary</td>
<td id="T_fad71_row13_col2" class="data row13 col2">0.038900</td>
<td id="T_fad71_row13_col3" class="data row13 col3">[-0.0091, 0.0870]</td>
</tr>
<tr class="odd">
<td id="T_fad71_row14_col0" class="data row14 col0">Politics: Ideology</td>
<td id="T_fad71_row14_col1" class="data row14 col1">Ideology: Very conservative</td>
<td id="T_fad71_row14_col2" class="data row14 col2">-0.356000</td>
<td id="T_fad71_row14_col3" class="data row14 col3">[-0.3798, -0.3322]</td>
</tr>
<tr class="even">
<td id="T_fad71_row15_col0" class="data row15 col0">Politics: Ideology</td>
<td id="T_fad71_row15_col1" class="data row15 col1">Ideology: Conservative</td>
<td id="T_fad71_row15_col2" class="data row15 col2">-0.274800</td>
<td id="T_fad71_row15_col3" class="data row15 col3">[-0.2957, -0.2539]</td>
</tr>
<tr class="odd">
<td id="T_fad71_row16_col0" class="data row16 col0">Politics: Ideology</td>
<td id="T_fad71_row16_col1" class="data row16 col1">Ideology: Moderate</td>
<td id="T_fad71_row16_col2" class="data row16 col2">-0.094900</td>
<td id="T_fad71_row16_col3" class="data row16 col3">[-0.1084, -0.0813]</td>
</tr>
<tr class="even">
<td id="T_fad71_row17_col0" class="data row17 col0">Politics: Ideology</td>
<td id="T_fad71_row17_col1" class="data row17 col1">Ideology: Nonresponse</td>
<td id="T_fad71_row17_col2" class="data row17 col2">-0.088800</td>
<td id="T_fad71_row17_col3" class="data row17 col3">[-0.1144, -0.0633]</td>
</tr>
<tr class="odd">
<td id="T_fad71_row18_col0" class="data row18 col0">Politics: Ideology</td>
<td id="T_fad71_row18_col1" class="data row18 col1">Ideology: Slightly liberal</td>
<td id="T_fad71_row18_col2" class="data row18 col2">-0.020600</td>
<td id="T_fad71_row18_col3" class="data row18 col3">[-0.0320, -0.0092]</td>
</tr>
<tr class="even">
<td id="T_fad71_row19_col0" class="data row19 col0">Politics: Party ID</td>
<td id="T_fad71_row19_col1" class="data row19 col1">Party ID: Republican</td>
<td id="T_fad71_row19_col2" class="data row19 col2">-0.462300</td>
<td id="T_fad71_row19_col3" class="data row19 col3">[-0.4840, -0.4405]</td>
</tr>
<tr class="odd">
<td id="T_fad71_row20_col0" class="data row20 col0">Politics: Party ID</td>
<td id="T_fad71_row20_col1" class="data row20 col1">Party ID: Other</td>
<td id="T_fad71_row20_col2" class="data row20 col2">-0.390800</td>
<td id="T_fad71_row20_col3" class="data row20 col3">[-0.4110, -0.3706]</td>
</tr>
<tr class="even">
<td id="T_fad71_row21_col0" class="data row21 col0">Politics: Party ID</td>
<td id="T_fad71_row21_col1" class="data row21 col1">Party ID: Strong GOP</td>
<td id="T_fad71_row21_col2" class="data row21 col2">-0.300900</td>
<td id="T_fad71_row21_col3" class="data row21 col3">[-0.3231, -0.2786]</td>
</tr>
<tr class="odd">
<td id="T_fad71_row22_col0" class="data row22 col0">Politics: Party ID</td>
<td id="T_fad71_row22_col1" class="data row22 col1">Party ID: Lean GOP</td>
<td id="T_fad71_row22_col2" class="data row22 col2">-0.268700</td>
<td id="T_fad71_row22_col3" class="data row22 col3">[-0.2873, -0.2500]</td>
</tr>
<tr class="even">
<td id="T_fad71_row23_col0" class="data row23 col0">Politics: Party ID</td>
<td id="T_fad71_row23_col1" class="data row23 col1">Party ID: Nonresponse</td>
<td id="T_fad71_row23_col2" class="data row23 col2">-0.210500</td>
<td id="T_fad71_row23_col3" class="data row23 col3">[-0.2481, -0.1730]</td>
</tr>
<tr class="odd">
<td id="T_fad71_row24_col0" class="data row24 col0">Politics: Party ID</td>
<td id="T_fad71_row24_col1" class="data row24 col1">Party ID: Lean Dem</td>
<td id="T_fad71_row24_col2" class="data row24 col2">-0.054400</td>
<td id="T_fad71_row24_col3" class="data row24 col3">[-0.0679, -0.0409]</td>
</tr>
<tr class="even">
<td id="T_fad71_row25_col0" class="data row25 col0">Politics: Party ID</td>
<td id="T_fad71_row25_col1" class="data row25 col1">Party ID: Independent</td>
<td id="T_fad71_row25_col2" class="data row25 col2">-0.004000</td>
<td id="T_fad71_row25_col3" class="data row25 col3">[-0.0177, 0.0096]</td>
</tr>
</tbody>
</table>
<p>From the above we observe three clear findings:</p>
<ol type="1">
<li><p>High income is weakly associated with lower support, while middle income shows little difference relative to low income.</p></li>
<li><p>Education effects are small once political orientation is controlled.</p></li>
<li><p>The homeowner coefficient remains negative net of all controls.</p></li>
</ol>
<p>These results indicate that housing tenure captures something distinct from income and ideology, likely related to asset ownership, exposure to energy costs, or perceived regulatory risk.</p>
</section>
<section id="predicted-values-visualizing-the-tenure-gap" class="level2">
<h2 class="anchored" data-anchor-id="predicted-values-visualizing-the-tenure-gap">Predicted Values: Visualizing the Tenure Gap</h2>
<p>To make these results more intuitive, Figure 3 plots predicted levels of clean energy support across the ideological spectrum, holding other covariates constant:</p>
<p><img src="../exports/figures/predicted_support_ideo_income.png" class="img-fluid" alt="Predicted clean energy support by ideologg and income (weighted)"></p>
<p>This plot of predicted values suggests that:</p>
<ol type="1">
<li><p>Ideology strongly structures climate attitudes, with steep declines from liberal to conservative positions.</p></li>
<li><p>Income differences are modest at most ideological levels.</p></li>
<li><p>Homeownership shifts the entire prediction curve downward, indicating lower support across ideological positions.</p></li>
</ol>
<p>In other words, homeowners are less supportive of clean energy policies even when they share similar ideological positions with renters.</p>
</section>
<section id="interpretation-and-implications" class="level2">
<h2 class="anchored" data-anchor-id="interpretation-and-implications">Interpretation and Implications</h2>
<p>Taken together, these findings suggest that support for clean energy policy is shaped not only by ideology and partisanship, but also by material position within the housing system. Homeownership appears to be associated with lower support for environmental regulation in ways not reducible to income or political identity.</p>
<p>One plausible interpretation is that homeowners face different perceived costs and risks from climate and energy regulation, including concerns about housing retrofits, energy prices, or property values. While the CES cannot directly test these mechanisms, the results point to the importance of considering tenure and asset exposure when analyzing public opinion on climate policy.</p>
<p>More broadly, this analysis demonstrates that survey data—often criticized for capturing only “attitudes”—can still be used to study structured differences linked to social position, especially when variables are interpreted relationally rather than as isolated preferences.</p>
</section>
<section id="limitations-and-next-steps" class="level2">
<h2 class="anchored" data-anchor-id="limitations-and-next-steps">Limitations and Next Steps</h2>
<p>This analysis is descriptive and cross-sectional. Causal interpretations should be avoided. Additionally, the clean energy support index weights all component items equally, which may obscure policy-specific dynamics.</p>
<p>Future work could:</p>
<ol type="1">
<li><p>Examine individual policy items as robustness checks</p></li>
<li><p>Incorporate geographic context or energy cost measures</p></li>
<li><p>Explore longitudinal changes in tenure and climate attitudes</p></li>
</ol>
<p>Nonetheless, the present results provide clear evidence that housing tenure is an underappreciated dimension of class relevant to climate politics.</p>
</section>
<section id="methods" class="level2">
<h2 class="anchored" data-anchor-id="methods">Methods</h2>
<p><a href="https://github.com/bmdknndy/HomeOwnershipClimatePolicySupport">View the repo for this project on my GitHub</a></p>
<p>To reproduce:</p>
<ol type="1">
<li><p>run all DuckDB SQL scripts in sql/ folder</p></li>
<li><p>run notebooks/01_analysis.ipynb</p></li>
<li><p>run report/brief.ipynb</p></li>
</ol>
<p>For additional details on methods, run notebooks/03_methods_appendix.ipynb</p>
<p><strong><em>Brady Kennedy</em></strong></p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>